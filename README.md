Role Name
=========

Install and configure the ZNC IRC bouncer, including support for multiple separate client buffers.

Requirements
------------

None.

Role Variables
--------------

# ZNC Install
znc_install_version: 1.6.1  # The version of znc to install
znc_exec_user: znc-admin    # The user to create under which znc will run
znc_datadir: /etc/znc       # The root location of znc's configuration file structure
znc_debug: false            # Should znc be executed in debug mode?  The logs will show up in /var/log/upstart/znc.log

## ZNC Global Configuration
# For more details on ZNC's configuration, see the ZNC documentation at: http://wiki.znc.in/Configuration
znc_max_buffer_size: 100000    # The max size of any user buffer.  This is used as the default if no user-specific value is given.
znc_port: 6666                 # What port will znc listen on?
znc_ipv4: true                 # Should ZNC listen for ipv4 connections?
znc_ipv6: false                # ipv6?
znc_ssl: true                  # Should ZNC expect connections over ssl?
znc_ssl_certfile: "{{ znc_datadir }}/znc.pem"   # If ssl is enabled, where is the PEM file? This is generated by the Ansible build.
znc_global_modules:            # Which global modules should be installed?  Note that these are separate from user and network modules.
  - webadmin

# ZNC Networks and Channels
# Note that this object is only used in the znc_users object below, as a template.
znc_networks:
  freenode:
    server: chat.freenode.net
    port: 6697
    ssl: true
    password: ""              # Optional
    channels:                 # Optional
      - "#freenode"
    modules:                  # Optional
      - route_replies
      - keepnick
      - clientbuffer

# ZNC User Definitions
znc_users:
  - name: admin
    password:                               # These can be generated with `znc --makepass`.
      method: "sha256"
      hash: "481fe84cc70161b20eb0c487d212e8b94cabb45cb9f08b6c51cc2c0131c1b42e"
      salt: "J*;s-Z!gjJ:oJ.kThRZv"
    nick: adminuser
    realname: Admin ZNC User
    admin: true                           # There should be at least one admin user, but your primary user probably shouldn't be an admin.
    allow: "*"                            # Optional
    altnick: adminuser_                   # Optional
    autoclearchanbuffer: true             # Optional
    autoclearquerybuffer: true            # Optional
    buffer: 100000                        # Optional
    chanmodes: "+stn"                     # Optional
    ident: adminuser_                     # Optional
    multiclients: false                   # Optional
    networks: {{ znc_networks }}          # Optional
    modules:
      - chansaver
      - controlpanel
      - webadmin


Dependencies
------------

None.

Example Playbook
----------------

    - hosts: whatever
      sudo: yes
      roles:
        - znc

License
-------

MIT
